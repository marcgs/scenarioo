<usd-breadcrumb></usd-breadcrumb>

<div class="row-fluid">
    <div class="span12">
        <h1>Scenario: {{scenario.name}}</h1>
    </div>

</div>
<div class="row-fluid">
    <div class="span12">
        <div class="row-fluid">
            <div class="input-append">
                <input type="text" class="span2" ng-model="searchFieldText" placeholder="Search page..."/>
                <button ng-click="resetSearchField()" class="btn">reset</button>
            </div>
        </div>

        <div ng-repeat="pageSteps in pagesAndSteps" class="steps">
            <hr/>
            <div ng-show="$index==0 || showingSteps[$parent.$index]" class="link row-fluid step-view" ng-repeat="step in pageSteps.steps | filter:searchFieldText">
                <div class="span1">
                    <div ng-click="showingSteps[$parent.$index]=!showingSteps[$parent.$index]" ng-show="$index==0 && pageSteps.steps.length>1" class="step-icon pull-right">
                        <i ng-hide="showingSteps[$parent.$index]" class="icon-with-padding icon-plus-sign link"></i>
                        <i ng-show="showingSteps[$parent.$index]" class="icon-with-padding icon-minus-sign link"></i>
                    </div>
                    <div class="step-icon pull-right"  ng-show="$index==0 && pageSteps.steps.length==1">
                        <i class="icon-with-padding icon-circle"></i>
                    </div>
                </div>
                <div class="hero-unit-hover span10" ng-click="go(pageSteps, $parent.$index, $index)">
                    <div class="row-fluid">
                        <div class="hero-unit-small screenshot-small span5 hero-unit">
                            <div class="screenshot-div">
                                <img src="{{getScreenShotUrl(step.screenshotURL)}}"/>
                            </div>
                        </div>
                        <div class="span5 offset1">
                            <div class="step-title">
                                <h4>{{($parent.$index+1)}} {{$index>0 && "."+$index || ""}} - {{step.title && step.title || "undefined"}}</h4>
                                {{pageSteps.page.name}} ({{($parent.$index+1) + " of "+pagesAndSteps.length}})
                            </div>
                        </div>
                    </div>
                </div>

                <div class="screenshot-overlay" modal="step.showingScreenshotModal" close="closeScreenshotModal(step)" options="modalScreenshotOptions">
                    <div class="modal-header">
                        <h3>Step {{pageIndex}}.{{stepIndex}} {{pageName}}</h3>
                    </div>
                    <div class="modal-body">
                        <img src="{{getScreenShotUrl(step.screenshotURL)}}"/>
                    </div>
                    <div class="modal-footer">
                        <button class="btn" ng-click="closeScreenshotModal(step)">Close</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>