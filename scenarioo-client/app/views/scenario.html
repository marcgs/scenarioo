<usd-breadcrumb></usd-breadcrumb>

<h1>Scenario: {{scenario.name | toHumanReadable}}</h1>

<div class="row ngusd-space-top ngusd-space-bottom">
    <div class="col-lg-3">
        <div class="input-group">
            <input type="text" class="form-control" ng-model="searchFieldText" placeholder="Search page..."/>
            <span class="input-group-btn">
                <button type="button" ng-click="resetSearchField()" class="btn btn-default">reset</button>
            </span>
        </div>
    </div>
</div>

<div ng-repeat="page in pagesAndSteps" class="steps">
    <h2>Page: {{page.page.name}}
        <div ng-click="showingSteps[$index] =! showingSteps[$index]" ng-show="page.steps.length > 1" class="step-icon pull-right">
            <i ng-hide="showingSteps[$index]" class="icon-with-padding icon-plus-sign link"></i>
            <i ng-show="showingSteps[$index]" class="icon-with-padding icon-minus-sign link"></i>
        </div>
    </h2>
    <div ng-repeat="step in page.steps | filter:searchFieldText" ng-show="$index==0 || showingSteps[$parent.$index]" class="link row step-view" >
        <div class="col-lg-8" ng-click="goToStep(page, $parent.$index, $index)">
            <div class="screenshot-div" style="max-height:300px;overflow:hidden; margin: 10px 0 10px 0;">
                <img ng-src="{{getScreenShotUrl(step.screenshotFileName)}}" style="width:100%"/>
            </div>
        </div>
        <div class="col-lg-4">
            <div class="step-title">
                <h4>Step {{step.number}}: {{step.title}}</h4>
                {{step.page.name}} ({{step.page.index}} of {{pagesAndSteps.length}})

                <div ng-repeat="(key,value) in step.details.properties" class="row">
                    <div class="col-lg-4">{{key | toHumanReadable}}</div>
                    <div class="col-lg-8">{{value}}</div>
                </div>
                <div ng-repeat="(key,value) in step.page.details.properties" class="row">
                    <div class="col-lg-4">{{key | toHumanReadable}}</div>
                    <div class="col-lg-8">{{value}}</div>
                </div>
            </div>
        </div>
    </div>
</div>
